import{u as f,a as b,r as t,j as s}from"./index-CeG5SmX4.js";import{U as C,a as k}from"./UseApi-CiPXnAfJ.js";import{R as I}from"./index-aig0Wg5F.js";const w=()=>{const n=f(),h=b(),{campId:o,campName:e}=h.state??{campaignId:"",campName:""},[m,N]=t.useState(!1),[r,D]=t.useState(0),[_,p]=t.useState(!1),[l,x]=t.useState({impressions:0,clicks:0,users:0}),a=C(k(o,r));t.useEffect(()=>{o.toString()?N(!0):n("/404")},[]);const j=()=>{n("/")};return t.useLayoutEffect(()=>{if(m){const c=setInterval(()=>{p(!1),D(i=>i+1)},5e3);return()=>clearInterval(c)}},[m]),t.useEffect(()=>{a.request(),p(!0)},[r]),t.useEffect(()=>{_&&a.status&&x(c=>{var i,d,u;return{...c,impressions:c.impressions+((i=a==null?void 0:a.data)==null?void 0:i.impressions),clicks:c.clicks+((d=a==null?void 0:a.data)==null?void 0:d.clicks),users:c.users+((u=a==null?void 0:a.data)==null?void 0:u.users)}})},[_,a.status]),s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"dashboard__block campDetails__blockFix",children:[s.jsx("h1",{className:"dashboard__title",children:"Dashboard | Campaign Details"}),s.jsxs("button",{className:"campDetails__btn",type:"button",onClick:()=>j(),children:[s.jsx(I,{className:"campDetails__icon"})," Campaign List"]})]}),s.jsxs("h2",{className:"dashboard__subtitle",children:["Campaign ",e]}),s.jsxs("blockquote",{className:"dashboard__desc campDetails__desc",children:["Here, you can view the key performance metrics of the ",e," Campaign. Please note that the data is refreshed and updated every 5 seconds."]}),s.jsxs("section",{className:"dashboard__block",children:[s.jsx("p",{className:`dashboard__ribbon dashboard__ribbon--${e.toLowerCase()}`,children:"CAMP INFO"}),a.data&&s.jsxs("ul",{className:"campDetails__total",children:[s.jsxs("li",{className:"campDetails__totalInfo",children:["Total Impressions",s.jsx("span",{className:`campDetails__num campDetails__num--${e.toLowerCase()}`,children:l.impressions})]}),s.jsxs("li",{className:"campDetails__totalInfo",children:["Total Clicks",s.jsx("span",{className:`campDetails__num campDetails__num--${e.toLowerCase()}`,children:l.clicks})]}),s.jsxs("li",{className:"campDetails__totalInfo",children:["CTR (Click Through Rate)",s.jsxs("span",{className:`campDetails__num campDetails__num--${e.toLowerCase()}`,children:[(l.clicks/l.impressions*100).toFixed(1),"%"]})]}),s.jsxs("li",{className:"campDetails__totalInfo",children:["Total Users",s.jsx("span",{className:`campDetails__num campDetails__num--${e.toLowerCase()}`,children:l.users})]})]})]}),s.jsxs("section",{className:"campDetails__block",children:[s.jsx("h2",{className:"dashboard__subtitle campDetails__subtitle",children:"Most Recent Metrics"}),a.data&&s.jsxs("ul",{className:"campDetails__current",children:[s.jsxs("li",{className:`campDetails__currentInfo campDetails__currentInfo--${e.toLowerCase()}`,children:["Current Number",s.jsx("span",{className:"campDetails__lastNum",children:r})]}),s.jsxs("li",{className:`campDetails__currentInfo campDetails__currentInfo--${e.toLowerCase()}`,children:["Impressions",s.jsx("span",{className:"campDetails__lastNum",children:a.data.impressions})]}),s.jsxs("li",{className:`campDetails__currentInfo campDetails__currentInfo--${e.toLowerCase()}`,children:["Clicks",s.jsx("span",{className:"campDetails__lastNum",children:a.data.clicks})]}),s.jsxs("li",{className:`campDetails__currentInfo campDetails__currentInfo--${e.toLowerCase()}`,children:["CTR",s.jsxs("span",{className:"campDetails__lastNum",children:[(a.data.clicks/a.data.impressions*100).toFixed(1),"%"]})]}),s.jsxs("li",{className:`campDetails__currentInfo campDetails__currentInfo--${e.toLowerCase()}`,children:["Users",s.jsx("span",{className:"campDetails__lastNum",children:a.data.users})]})]})]})]})},v=w;export{v as CampaignDetails};
